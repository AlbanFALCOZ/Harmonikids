<app-navbar></app-navbar>

<div class="content" [ngClass]="{'nav-visible': isNavVisible}">
  
  <div class="progress-container">
    <progress class="progress-bar" [style.width.%]="(currentQuestionIndex+1)/questionList.length*100"></progress>
  </div>


  <div class="content-question">
    <ng-container *ngIf="questionList.length > 0 && currentQuestionIndex < questionList.length">

      <app-multi-choice
        *ngIf="questionList[currentQuestionIndex]?.typeOfQuestion !== 'drag-and-drop' && questionList[currentQuestionIndex]?.typeOfQuestion !== 'guess-the-sound'"
        [question]="questionList[currentQuestionIndex]" [answerAlreadySeleted]="selectedAnswer"
        (answerSelected)="onAnswerSelected($event)">
      </app-multi-choice>

      <app-drag-drop *ngIf="questionList[currentQuestionIndex]?.typeOfQuestion === 'drag-and-drop'"
        [drag]="questionList[currentQuestionIndex]">
      </app-drag-drop>

      <app-sound-question *ngIf="questionList[currentQuestionIndex]?.typeOfQuestion === 'guess-the-sound'"
        [sound]="questionList[currentQuestionIndex]" (answerSelected)="onAnswerSelected($event)">
      </app-sound-question>
    </ng-container>



    <div class="question-param">
      <div>
        <div class="Score">
          <div>Score : {{ selectedAnswerCorrect.length}}/{{ selectedAnswerAllQuestions.length }}</div>
        </div>
        <div>
          <img class="stars" src="assets/img/star.png" *ngFor="let item of generateArray(selectedAnswerCorrect.length)"
            width="50px" height="50px">
        </div>
      </div>
    </div>

  </div>



  <div class="quiz-btn">
    <button class="precedent" (click)="previousQuestion()">Précédent</button>
    <ng-container *ngIf="questionList[currentQuestionIndex]?.typeOfQuestion !== QuestionType.DragAndDrop">
      <button class="validate"
        [style.visibility]="questionCleared.includes(currentQuestionIndex) ? 'hidden' : 'visible'"
        (click)="validateQuestion()">Valider</button>
    </ng-container>

    <button type="submit" class="suivant" (click)="nextQuestion()" >Suivant</button>
  </div>


<div class="messageSuccess" *ngIf="showSuccessMessage"  >
  Bravo ! Tu as trouvé la bonne réponse !
</div>


<div class="messageFailure" *ngIf="showFailureMessage" >
  T'y étais presque ! Courage , des étoiles à gagner t'attendent !
</div>


<div *ngIf="showFailureMessage && (hintText || hintImageUrl)" class="hint">
  <p *ngIf="hintText">{{ hintText }}</p>
  <img *ngIf="hintImageUrl" [src]="hintImageUrl" alt="Indice">
</div>




